#pragma once
////////////////////////////////////////////////////////////////
/// 马国良电路板API头文件，未经授权禁止使用。
/// 作者：马国梁，孙奇
/// 运行环境 windows 7及以上版本, 32bit.
/// 开发环境 visual studio 2015.
/// Version: 1.0
/// ////////////////////////////////////////////////////////////

typedef void * PDevice;

////////////////////////////////////////////////////////////////
/// <Function> GetDeviceCount <Function/>
/// <Description> 获取连接的设备数量<Description/>
/// <Return>连接的设备数量<Return/>
////////////////////////////////////////////////////////////////
extern int GetDeviceCount();

////////////////////////////////////////////////////////////////
/// <Function> GetDeviceDescrption <Function/>
/// <Description> 获取设备描述<Description/>
/// <index> 设备的索引 <index/>
/// <pDst> 存放描述的数组 <pDst/>
/// <dstLen> 存放描述的数组长度 <dstLen/>
/// <Return>NA<Return/>
////////////////////////////////////////////////////////////////
extern void GetDeviceDescrption(const int index, char* pDst, const size_t dstLen);

////////////////////////////////////////////////////////////////
/// <Function> OpenDevice <Function/>
/// <Description> 打开设备<Description/>
/// <index> 设备的索引 <index/>
/// <Return>打开的设备对象, 如果失败返回nullptr<Return/>
////////////////////////////////////////////////////////////////
extern PDevice OpenDevice(const int deviceIndex);

////////////////////////////////////////////////////////////////
/// <Function> QuaryFrame <Function/>
/// <Description> 获取一帧图像数据包，使用完毕后需要调用RetriveFrame销毁图像内存，避免内存泄露<Description/>
/// <pDev> 设备对象 <pDev.>
/// <Return>图像数据包<Return/>
////////////////////////////////////////////////////////////////
extern unsigned char * QuaryFrame(PDevice pDev);

////////////////////////////////////////////////////////////////
/// <Function> GetImgWidth <Function/>
/// <Description> 从一帧图像数据包中获取图像的宽度<Description/>
/// <Return>图像的宽度<Return/>
////////////////////////////////////////////////////////////////
extern int GetImgWidth(unsigned char * pframe);

////////////////////////////////////////////////////////////////
/// <Function> GetImgHeight <Function/>
/// <Description> 从一帧图像数据包中获取图像的高度<Description/>
/// <Return>图像的高度<Return/>
////////////////////////////////////////////////////////////////
extern int GetImgHeight(unsigned char * pframe);

////////////////////////////////////////////////////////////////
/// <Function> GetImg <Function/>
/// <Description> 从一帧图像数据包中获取图像数据<Description/>
/// <Return>图像数据<Return/>
////////////////////////////////////////////////////////////////
extern unsigned char * GetImg(unsigned char * pframe);


////////////////////////////////////////////////////////////////
/// <Function> RetriveFrame <Function/>
/// <Description> 把图像内存还给图像获取服务，避免内存泄露<Description/>
/// <Return>NA<Return/>
////////////////////////////////////////////////////////////////
extern void RetriveFrame(unsigned char *pframe);

////////////////////////////////////////////////////////////////
/// <Function> CloseDevice <Function/>
/// <Description> 关闭设备<Description/>
/// <index> 设备对象 <index/>
/// <Return>NA<Return/>
////////////////////////////////////////////////////////////////
extern void CloseDevice(PDevice pDev);
